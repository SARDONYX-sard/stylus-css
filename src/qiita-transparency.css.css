/* ==UserStyle==
@name           Qiita transparency
@namespace      https://github.com/SARDONYX-sard/stylus-css
@version        0.1.0
@author         SARDONYX
@description    Qiitaの記事ページの背景を透過させ、任意の画像を差し込む。
@license        WTFPL(https://github.com/SARDONYX-sard/stylus-css/blob/main/LICENCE)
@updateURL      https://raw.githubusercontent.com/SARDONYX-sard/stylus-css/main/src/qiita-transparency.css
@preprocessor   stylus

@var checkbox darkModeScrollbar "ダークモード スクロールバー" 1
@var checkbox oneDarkEnable "OneDark(Syntax Highlight)" 1
@var color charColor "文字色(RGBA)" rgba(255, 255, 255, 0.8)
@var color bgColor "背景色" #2222229c
@var color hoverBgColor "目次の色: (hover&focus)" #5a6e4aab
@var text fontsCustom "フォント" "Yu Mincho, Hiragino Mincho Pro, Sawarabi Mincho, serif"

@var select bgImg "背景" {
  "Safari": "url('https://cdn.wallpapersafari.com/63/66/bEVak3.jpg')", 
  "fantasy": "url('https://lilapila.com/wp-content/uploads/2021/02/HD-Desktop-Wallpaper-9.jpg')", 
  "塔": "url('https://images2.alphacoders.com/113/thumb-1920-1131058.jpg')", 
  "手水舎": "url('https://www.pixelstalk.net/wp-content/uploads/2016/05/Japan-HD-Image.jpg')",
  "桜": "url('https://images5.alphacoders.com/110/thumb-1920-1105001.jpg')",
  "猫と蝶": "url('https://storge.pic2.me/cm/1920x1080/955/5f7f980c1b2194.21812251.jpg')", 
  "紅葉": "url('https://cdn.wallpapersafari.com/72/79/4uV7vy.jpg')",
  "都会": "url('https://wallpaperaccess.com/full/1265.jpg')",
}
@var checkbox customBgImgEnabled "カスタム背景を使用" 0
@var text customBgImgUrl "カスタム背景('でURLを囲む)" "'https://storge.pic2.me/cm/1920x1080/955/5f7f980c1b2194.21812251.jpg'"
==/UserStyle== */
@-moz-document domain("qiita.com") {
    :root {
        --fonts: fontsCustom;

        /* サイト内の既存のCSS変数を上書き */
        --anchor-hover-color: anchorHoverColor;
        --icon-bg-color: iconBgColor;
        --color-background: bgColor;
        --color-surface: hoverBgColor;
        --color-surface-variant: hoverBgColor;
        --color-text-disabled: rgb(255 255 255 * 38%);
        --color-text-high-emphasis: charColor;
        --color-text-medium-emphasis: charColor;
        --color-divider: rgb(0 0 0 / 12%);
        --color-scrim: rgb(0 0 0 / 32%);
        if customBgImgEnabled {
            --wallpaper-url: convert("url(" + customBgImgUrl + ")");
        }
        else {
            --wallpaper-url: bgImg;
        }
    }

    html {
        background-attachment: fixed;
        background-color: #1C1C1C;
        background-image: var(--wallpaper-url);
        background-position: bottom;
        background-repeat: no-repeat;
        background-size: cover;
    }

    body {
        font-family: var(--fonts);
        font-size: 1.67rem;
    }

    /* あらかじめすべて背景を透過しておく */
    .it-MdContent .code-frame,
    .allWrapper *,
    body {
        background-color: transparent;
    }

    a {
        color: auto;
    }

    /* 透過した背景の一部を上書きしていく */
    .focus,
    .st-NewHeader,
    .st-NewHeader_mainNavigation,
    .it-MdContent .highlight,
    .p-items_toc,
    .p-items_main > * {
        background-color: var(--color-background);
    }
    main {
        background-color: var(--color-background) !important;
    }


    if darkModeScrollbar {
        ::-webkit-scrollbar {
            background-color: #262a2b;
            color: #cdc5b8;
        }
        ::-webkit-scrollbar-corner {
            background-color: #1d1f20;
        }
        ::-webkit-scrollbar-thumb {
            background-color: #53595c;
        }
    }

    if oneDarkEnable {
        .it-MdContent {
            --blue: #4ebbff;
            --aqua: #55d8e4;
            --orange: #e6a260;
            --violet: #be77ea;
            --white: #e3e3e3;
        }

        .it-MdContent .highlight .se,
        .it-MdContent .highlight .mi,
        .it-MdContent .highlight .kc {
            color: var(--orange) !important;
        }

        .it-MdContent .highlight .sr {
            color: var(--aqua);
        }

        .it-MdContent .highlight .il,
        .it-MdContent .highlight .l,
        .it-MdContent .highlight .m,
        .it-MdContent .highlight .mb,
        .it-MdContent .highlight .mf,
        .it-MdContent .highlight .mh,
        .it-MdContent .highlight .mo,
        .it-MdContent .highlight .kr,
        .it-MdContent .highlight .k,
        .it-MdContent .highlight .kd,
        .it-MdContent .highlight .kp,
        .it-MdContent .highlight .kt,
        .it-MdContent .highlight .no {
            color: var(--violet);
        }

        .it-MdContent .highlight .fm,
        .it-MdContent .highlight .gi,
        .it-MdContent .highlight .nc,
        .it-MdContent .highlight .nd,
        .it-MdContent .highlight .ne,
        .it-MdContent .highlight .nf,
        .it-MdContent .highlight .nx {
            color: var(--blue);
        }

        .it-MdContent .highlight .na,
        .it-MdContent .highlight .n,
        .it-MdContent .highlight .p,
        .it-MdContent .highlight .nb,
        .it-MdContent .highlight .ni,
        .it-MdContent .highlight .nl,
        .it-MdContent .highlight .nn,
        .it-MdContent .highlight .py,
        .it-MdContent .highlight .nv,
        .it-MdContent .highlight .w,
        .it-MdContent .highlight .bp,
        .it-MdContent .highlight .vc,
        .it-MdContent .highlight .vg,
        .it-MdContent .highlight .vi,
        .it-MdContent .highlight .vm {
            color: var(--white);
        }

        .it-MdContent .highlight .ld,
        .it-MdContent .highlight .s,
        .it-MdContent .highlight .sa,
        .it-MdContent .highlight .sb,
        .it-MdContent .highlight .sc,
        .it-MdContent .highlight .dl,
        .it-MdContent .highlight .sd,
        .it-MdContent .highlight .s2,
        .it-MdContent .highlight .sh,
        .it-MdContent .highlight .si,
        .it-MdContent .highlight .sx,
        .it-MdContent .highlight .s1,
        .it-MdContent .highlight .ss {
            color: #a6ea61;
        }

        .it-MdContent .highlight .o,
        .it-MdContent .highlight .gd,
        .it-MdContent .highlight .kn,
        .it-MdContent .highlight .nt,
        .it-MdContent .highlight .ow {
            color: #f77;
        }
    }
}